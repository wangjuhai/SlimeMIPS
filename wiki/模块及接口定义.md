# 模块及接口定义

* [CPU](#cpu)
    + IF级
      - [PC](#pc)
	  - [ADD](#add)
      - [IM](#im)
    + [IF_ID](#if_id)
    + ID级
      - [CU](#cu)
      - [REG_WADDR_MUX](#reg_waddr_mux)
      - [ID_EXT](#id_ext)
      - [RDATA_MUX](#rdata_mux)
    + [ID_EX](#id_ex)
    + [EX](#ex)
      - [ALU](#alu)
      - [DIV](#div)
      - [MULT](#mult)
      - [EX_BRANCH](#ex_branch)
    + [EX_MEM](#ex_mem)
	+ [EX_EXCEPTION](#ex_exception)
	  - [CATCH](#catch)
	  - [HANDLE](#handle)
	+ [EXCEPTION_MEM](#exception_mem)
    + [MEM](#mem)
      - [DM](#dm)
      - [MEM_EXT](#mem_ext)
    + [MEM_WB](#mem_wb)
    + [WB](#wb)
      - [HILO](#hilo)
      - [HILO_CU](#hilo_cu)
      - [RF](#rf)
	  - [CP0](#cp0)
    + [STALL](#stall)
	+ [FLASH](#flash)
	+ [DC](#dc)

## CPU

### IF

#### R_PC

- 部件描述：程序计数器
- 部件类型：寄存器
- 输入信号说明
	|名称			|来源			|位宽|描述			|
	|:---:|:---:|:---:|:---:|
	|_pc			|IF_MUX1		|32	|下一跳指令的地址			|
- 输出信号说明
	|名称			|去向		|描述			|
	|:---:|:---:|:---:|
	|pc_			|IF.IF_EXC/IF.IM/IF.SUB4/IF.ADD8/IF.ADD4/ID.ID_MUX1	|32	|本次进入流水线的指令的地址		|

#### IF_MUX1

- 部件描述：下一阶段pc值的选择器
- 部件类型：优先选择器
- 选择信号说明
	|名称			|来源			|位宽|描述			|
	|:---:|:---:|:---:|:---:|
	|_sel_npc		|{rst/FALSH.flash_[0]/STALL.stall_[0]/ID.ID_CU.jb_/EX.EX_AND1.bb_}		|5	|硬件复位，流水线冲刷，流水线暂停，两种类型的分支|
- 输入信号说明
	|名称			|来源		|位宽|描述			|
	|:---:|:---:|:---:|:---:|
	|_pc			|IF.R_PC			|32	|暂停时的pc值	|
	|_pc_add4			|IF.ADD4				|32	|正常的pc+4			|
	|_jb_target		|ID.ID_MUX4			|32	|j类型分支指令的跳转地址	|
	|_bb_target		|EX.ADD				|32	|b类型分支指令的跳转地址	|
	|_excpc		|EXCEPTION.EXCEPTION_MUX3		|32	|发生异常的异常处理程序地址		|
	|_rstpc			|常数发生器			|32	|硬件复位的初始程序地址			|
- 输出信号说明
	|名称			|去向		|位宽|描述			|
	|:---:|:---:|:---:|:---:|
	|pc_			|R_PC		|32	|选出的下一条指令的地址				|

#### SUB4

- 部件描述：计算pc-4
- 部件类型：减法器
- 输入信号说明
	|名称			|来源			|位宽|描述			|
	|:---:|:---:|:---:|:---:|
	|_pc		|IF.R_PC			|32	|当前取指阶段的PC			|
	|_32constant4		|常数发生器		|32	|32位常数4				|
- 输出信号说明
	|名称			|去向		|位宽|描述			|
	|:---:|:---:|:---:|:---:|
	|pc_sub4_		|ID_MUX1		|32	|作为例外处理的返回地址				|

#### ADD4

- 部件描述：计算pc+4
- 部件类型：加法器
- 输入信号说明
	|名称			|来源			|位宽|描述			|
	|:---:|:---:|:---:|:---:|
	|_pc		|IF.R_PC			|32	|当前取指阶段的PC			|
	|_32constant4		|常数发生器		|32	|32位常数4				|
- 输出信号说明
	|名称			|去向		|位宽|描述			|
	|:---:|:---:|:---:|:---:|
	|pc_add4_	|IF_MUX1		|32	|可能的下一跳执行的指令的地址			|

#### ADD8

- 部件描述：计算pc+8
- 部件类型：加法器
- 输入信号说明
	|名称			|来源			|位宽|描述			|
	|:---:|:---:|:---:|:---:|
	|_pc		|IF.R_PC			|32	|当前取指阶段的PC			|
	|_32constant8		|常数发生器		|32	|32位常数8				|
- 输出信号说明
	|名称			|去向		|位宽|描述			|
	|:---:|:---:|:---:|:---:|
	|pc_add8_	|ID_MUX1		|32	|链接跳转指令要保存进31号寄存器的返回地址			|

#### IM

- 模块描述：指令寄存器
- 输入信号说明
	|名称			|来源			|位宽|描述			|
	|:---:|:---:|:---:|:---:|
	|_pc		|IF.R_PC		|32	|本次进入流水线的指令的地址		|	
- 输出信号说明
	|名称			|去向		|位宽|描述			|
	|:---:|:---:|:---:|:---:|
	|inst_		|ID_MUX1		|32	|本次进入流水线的指令		|
- 内部部件说明：  
	|名称          |个数|位宽|类型	|描述                    |
	|:---:         |:---:	|:----:						|:----:						|:----:						|
	|inst_rom		|1024|32|寄存器		|临时充当指令存储器		|

#### IF_EXC

- 模块描述：取指阶段的异常捕获模块
- 输入信号说明
	|名称			|来源			|位宽|描述			|
	|:---:|:---:|:---:|:---:|
	|_pc		|IF.R_PC		|32	|本次进入流水线的指令的地址		|	
	|_32constant0		|常数发生器			|32	|32位常数0				|
- 输出信号说明
	|名称			|去向		|位宽|描述			|
	|:---:|:---:|:---:|:---:|
	|exc_	|ID_MUX1		|32	|异常向量				|

### ID

#### ID_MUX1

- 部件描述：选择进入译码阶段的寄存器数据
- 部件类型：优先选择器
- 选择信号说明
	|名称			|来源			|位宽|描述			|
	|:---:|:---:|:---:|:---:|
	|_sel_id_data		|{rst/FLASH.flash_[1]/STALL.stall[1]}|3|硬件复位，流水线冲刷，流水线暂停		|
- 输入信号说明
	|名称			|来源		|位宽|描述			|
	|:---:|:---:|:---:|:---:|
	|_32constant0		|32|常数生成器				|32位常数0（流水线冲刷和复位）			|
	|_linst	|ID_REG		|32|当前译码阶段的输入数据（ID暂停时的传入的数据）|
	|_lpc		|ID_REG		|32||
	|_lpc_sub4	|ID_REG		|32||
	|_lpc_add8	|ID_REG		|32||
	|_lexc		|ID_REG		|32||
	|_inst		|IF.IM		|正常将进入译码阶段的指令			|
	|_pc		|IF.R_PC			|32|正常将进入译码阶段的指令的地址					|
	|_pc_sub4	|IF.SUB4			|32|pc-4用于延迟槽指令的异常返回地址				|
	|_pc_add8	|IF.ADD8			|32|pc+8链接跳转指令保存的返回地址				|
	|_exc		|IF.IF_EXC			|32|正常将进入译码阶段的异常向量					|
- 输出信号说明
	|名称			|去向		|描述			|
	|:---:|:---:|:---:|
	|inst_		|ID_REG			|32|即将进入译码阶段的指令			|
	|pc_		|ID_REG			|32|即将进入译码阶段的指令的地址					|
	|pc_sub4_	|ID_REG			|32|pc-4用于延迟槽指令的异常返回地址				|
	|pc_add8_	|ID_REG			|32|pc+8链接跳转指令保存的返回地址				|
	|exc_		|ID_REG			|32|异常向量					|

#### ID_REG

- 部件描述：缓存IF传递过来的数据
- 部件类型：寄存器组
- 内部寄存器说明
	|名称			|位宽|描述			|
	|:---:|:---:|:---:|
	|IR			|32|缓存指令						|
	|PC			|32|缓存PC                         |
	|PC_SUB4	|32|缓存PC-4                       |
	|PC_ADD8	|32|缓存PC+8                       |
	|EXC		|32|缓存异常向量					|
- 输入信号说明
	|名称			|来源		|位宽|描述			|
	|:---:|:---:|:---:|:---:|
	|_inst		|ID.ID_MUX1			|32|即将进入译码阶段的指令			|
	|_pc		|ID.ID_MUX1			|32|即将进入译码阶段的指令的地址					|
	|_pc_sub4	|ID.ID_MUX1			|32|pc-4用于延迟槽指令的异常返回地址				|
	|_pc_add8	|ID.ID_MUX1			|32|pc+8链接跳转指令保存的返回地址				|
	|_exc		|ID.ID_MUX1			|32|异常向量					|
- 输出信号说明
	|名称			|去向		|位宽|描述			|
	|:---:|:---:|:---:|:---:|
	|inst_		|ID.ID_MUX1._linst|32|即将进入译码阶段的指令			|
	|pc_		|ID.ID_MUX1._lpc|32|即将进入译码阶段的指令的地址					|
	|pc_sub4_	|ID.ID_MUX1._lsub4|32|pc-4用于延迟槽指令的异常返回地址				|
	|pc_add8_	|ID.ID_MUX1._ladd8|32|pc+8链接跳转指令保存的返回地址				|
	|exc_		|ID.ID_MUX1._lexc|32|异常向量					|

***

#### CU

- 模块描述：控制单元
- 子模块：
- 父模块：[ID](#id)
- 接口定义：  
	|名称          |类型|位宽 |输入/输出|描述                    |
	|:---:         |:---:|:---:|:---:    |:---                    |
	|_inst			|wire	|32		|input	|译码阶段的指令			|
	|sel_rdata_	|reg	|5	|output	|读数据选择信号		|
	|sel_rf_wdata_	|reg	|3	|output	|regfile写数据选择信号	|
	|sel_rf_waddr_	|reg	|2	|output	|regfile写地址选择信号	|
	|id_extend_	|reg	|3	|output	|位数拓展控制信号	|
	|alu_op_	|reg	|8	|output	|alu运算类型		|
	|rf_we_		|reg	|1	|output	|regfile写使能		|
	|hilo_we_	|reg	|3	|output	|hilo寄存器写使能	|
	|jb_		|reg	|1	|output	|j类型的跳转		|
	|bb_		|reg	|1	|output	|b类型的跳转		|
	|div_type_		|reg	|2	|output	|除法类型		|
	|mult_type_		|reg	|2	|output	|乘法指令及其类型	|
	|mem_ext_	|reg	|5	|output	|从DM中取出的数据的加工方法	|
	|sel_dm_wdata_	|reg	|2	|output	|DM写入位选择信号			|

#### REG_WADDR_MUX

- 模块描述：选择regfile的写地址信号
- 子模块：
- 父模块：[ID](#id)
- 接口定义：  
	|名称          |类型|位宽 |输入/输出|描述                    |
	|:---:         |:---:|:---:|:---:    |:---                    |
	|_sel_rf_waddr	|wire	|2	|input	|regfile写地址选择信号          |
	|_constant_31	|wire	|5	|input	|常量31                         |
	|_rt		|wire	|5	|input	|rt寄存器的地址                 |
	|_rd		|wire	|5	|input	|rd寄存器的地址                 |
	|reg_waddr_	|reg	|5	|output	|regfile最终的写地址		|

#### ID_EXT

- 模块描述：位拓展器
- 子模块：
- 父模块：
- 接口定义：  
	|名称          |类型|位宽 |输入/输出|描述                    |
	|:---:         |:---:|:---:|:---:    |:---                    |
	|_imm26		|wire	|26	|input	|包含待拓展信号的信号           |
	|_pc_h4	|wire	|4	|input	|用于拓展的pc的高4位            |
	|_id_extend	|wire	|3	|input	|用于选择拓展类型的信号         |
	|imm32_		|reg	|32	|output	|拓展后的32位数			|

#### DATA1_MUX

- 模块描述：EX阶段的ALU的操作数1
- 子模块：
- 父模块：
- 接口定义：  
	|名称          |类型|位宽 |输入/输出|描述                    |
	|:---:         |:---:|:---:|:---:    |:---                    |
	|_sel_data1			|wire	|2		|input	|操作数1选择信号			|
	|_rs_data			|wire	|32		|input	|rs寄存器的值				|
	|_rt_data			|wire	|32		|input	|rt寄存器的值				|

#### RDATA_MUX

- 模块描述：读数据选择器
- 子模块：
- 父模块：[ID](#id)
- 接口定义：  
	|名称          |类型|位宽 |输入/输出|描述                    |
	|:---:         |:---:|:---:|:---:    |:---                    |
	|imm32_			|wire	|32	|input	|拓展后的32位立即数                            |
	|_constant_16		|wire	|32	|input	|用于LUI的操作数1                               |
	|_constant_0		|wire	|32	|input	|用于条件分支的操作数2                          |
	|_rs_data		|wire	|32	|input	|寄存器rs中的数据                               |
	|_rt_data		|wire	|32	|input	|寄存器rt中的数据                               |
	|_sel_rdata		|wire	|5	|input	|读数选择信号                                   |
	|data1_			|reg	|32	|output	|alu原操作数1                                   |
	|data2_			|reg	|32	|output	|alu原操作数2					|
	|branch_target_offest	|reg	|32	|output	|j类型跳转指令的目的地址或b类型跳转指令的偏移量|

### ID_EX

- 模块描述：将译码阶段的数据传递给执行阶段
- 子模块：
- 父模块：[CPU](#cpu)
- 接口定义：  
	|名称          |类型|位宽 |输入/输出|描述                    |
	|:---:         |:---:|:---:|:---:    |:---                    |
	|_pc			|wire	|32	|input	|执行阶段的指令的地址                   |
	|_pc4			|wire	|32	|input	|执行阶段的指令的地址+4                   |
	|_pc8			|wire	|32	|input	|执行阶段的指令的地址+8                   |
	|_inst			|wire	|32	|input	|执行阶段的指令								|
	|_sel_rf_wdata	|wire	|3	|input	|regfile写数据选择信号                          |
	|_bb			|wire	|1	|input	|是否是b类型分支指令                            |
	|_hilo_we		|wire	|3	|input	|hilo寄存器写使能                               |
	|_alu_op		|wire	|8	|input	|alu的运算类型                                  |
	|_rf_waddr		|wire	|5	|input	|regfile寄存器的写地址                          |
	|_rf_we			|wire	|1	|input	|regfile的写使能                                |
	|_data1			|wire	|32	|input	|alu的原操作数1                                 |
	|_data2			|wire	|32	|input	|alu的原操作数2                                 |
	|_bb_offest		|wire	|32	|input	|b类型的跳转指令的偏移量                        |
	|_div_type		|wire	|2	|input	|除法类型										|
	|_mult_type		|wire	|2	|input	|乘法运算及其类型				|
	|_mem_ext	|wire	|5	|input	|从DM中取出的数据的加工方法	|
	|_dm_wdata		|wire	|32	|input	|要写入DM中的数据		|
	|_sel_dm_wdata	|wire	|2	|input	|DM写入位选择信号			|
	|_rst			|wire	|1	|input		|复位信号（低电平有效）			|
	|_stall			|wire	|1	|input	|流水线执行阶段是否暂停				|
	|_flash			|wire	|1	|input	|执行阶段冒泡信号					|
	|dm_wdata_		|reg	|32	|output	|	|
	|sel_dm_wdata_	|reg	|2	|output	|	|
	|mem_extend_	|reg	|5	|output	||
	|div_			|reg	|2	|output	|				|
	|mult_			|reg	|2	|output	|				|
	|sel_reg_wdata_		|reg	|3	|output	|                         |
	|b_			|reg	|1	|output	|                         |
	|hilo_we_		|reg	|3	|output	|                         |
	|pc_			|reg	|32	|output	|                         |
	|alu_op_		|reg	|8	|output	|                         |
	|reg_waddr_		|reg	|5	|output	|                         |
	|rf_we_			|reg	|1	|output	|                         |
	|data1_			|reg	|32	|output	|                         |
	|data2_			|reg	|32	|output	|                         |
	|b_branch_offest_	|reg	|32	|output	|                         |

### EX

- 模块描述：执行阶段 
- 子模块：[ALU](#alu)，[DIV](#div)，[MULT](#mult)，[EX_BRANCH](#ex_branch)
- 父模块：[CPU](#cpu)
- 接口定义：  
	|名称          |类型|位宽 |输入/输出|描述                    |
	|:---:         |:---:|:---:|:---:    |:---                    |
	|b_branch_offset_	|wire	|32	|input	|b类型跳转指令可能跳转的地址偏移量	|
	|_data1			|wire	|32	|input	|参与运算的原操作数1                    |
	|_data2			|wire	|32	|input	|参与运算的原操作数2                    |
	|_reg_waddr		|wire	|5	|input	|要写的寄存器地址                       |
	|_rf_we			|wire	|1	|input	|regfile寄存器写使能                    |
	|_alu_op		|wire	|8	|input	|alu进行的运算类型               	|
	|_pc			|wire	|32	|input	|当前处于执行阶段的指令的地址		|
	|_hilo_we		|wire	|3	|input	|hilo寄存器写使能                       |
	|_b			|wire	|1	|input	|b类型跳转指令				|
	|_sel_reg_wdata		|wire	|3	|input	|regfile写数据选择信号			|
	|_div			|wire	|2	|input	|除法类型				|
	|_mult			|wire	|2	|input	|乘法类型				|
	|_mem_extend		|wire	|5	|input	|从DM中取出的数据的加工方法	|
	|_dm_wdata		|wire	|32	|input	|要写入DM中的数据		|
	|_sel_dm_wdata		|wire	|2	|input	|DM写入位选择信号			|
	|mem_extend_		|reg	|5	|output	||
	|sel_reg_wdata_		|reg	|3	|output	|regfile写数据选择信号			|
	|alu_res_		|reg	|32	|output	|alu的运算结果                          |
	|reg_waddr_		|reg	|5	|output	|传递给回写阶段的写寄存器地址           |
	|rf_we_			|reg	|1	|output	|regfile寄存器写使能                    |
	|pc_			|reg	|32	|output	|将要传递给访存阶段的指令的地址		|
	|div_res_		|reg	|64	|output	|除法运算结果	                        |
	|mult_res_		|reg	|64	|output	|乘法运算结果				|
	|hilo_we_		|reg	|3	|output	|hilo寄存器写使能			|
	|b_flash_|reg	|1	|output	|b类型分支指令引起的冒泡		|
	|div_mult_stall_	|reg	|1	|output	|除法或乘法引起的暂停			|
	|link_return_addr_	|reg	|32	|output	|链接跳转指令的返回地址			|
	|b_			|reg	|1	|output	|是否是b类型分支指令			|
	|b_branch_target_	|reg	|32	|output	|b型跳转指令的目的地址			|
	|dm_wdata_		|reg	|32	|output	|	|
	|sel_dm_wdata_		|reg	|2	|output	|	|

#### ALU

- 模块描述：运算单元 
- 子模块：
- 父模块：[EX](#ex)
- 接口定义：  
	|名称          |类型|位宽 |输入/输出|描述                    |
	|:---:         |:---:|:---:|:---:    |:---                    |
	|_data1		|wire	|32	|input	|原操作数1(移位运算的位移量)		|
	|_data2		|wire	|32	|input	|原操作数2				|
	|_alu_op	|wire	|8	|input	|alu的运算类型				|
	|_alu_res	|reg	|32	|output	|alu的运算结果				|

#### DIV 

- 模块描述：除法计算单元 
- 子模块：
- 父模块：[EX](#ex)
- 接口定义：  
	|名称          |类型|位宽 |输入/输出|描述                    |
	|:---:         |:---:|:---:|:---:    |:---                    |
	|_data1		|wire	|32	|input	|被除数					|
	|_data2		|wire	|32	|input	|除数					|
	|_div		|wire	|2	|input	|当前指令是否是除法指令以及有符号还是无符号			|
	|div_stall_	|reg	|1	|output	|流水线暂停控制信号			|
	|div_res_	|reg	|64	|output	|除法运算结果				|
- 内部寄存器说明：待补充
	|名称          |个数|位宽 |描述                    |
	|:---:         |:---:|:---:|:---                    |
	|count		|1	|8	|记录除法执行周期计数				|

#### MULT 

- 模块描述：乘法计算单元 
- 子模块：
- 父模块：[EX](#ex)
- 接口定义：  
	|名称          |类型|位宽 |输入/输出|描述                    |
	|:---:         |:---:|:---:|:---:    |:---                    |
	|_data1		|wire	|32	|input	|乘数1					|
	|_data2		|wire	|32	|input	|乘数2					|
	|_mult		|wire	|2	|input	|乘法运算及运算类型			|
	|mult_res_	|reg	|64	|output	|乘法运算结果				|
	|mult_stall_	|reg	|1	|output	|流水线暂停控制信号			|
- 内部寄存器说明：待补充
	|名称          |个数|位宽 |描述                    |
	|:---:         |:---:|:---:|:---                    |
	|count		|1	|8	|记录乘法执行周期计数				|

#### EX_BRANCH 

- 模块描述：执行阶段分支控制单元 
- 子模块：
- 父模块：[EX](#ex)
- 接口定义：  
	|名称          |类型|位宽 |输入/输出|描述                    |
	|:---:         |:---:|:---:|:---:    |:---                    |
	|_b			|wire	|1	|input	|是否是b类型分支指令                                    |
	|_b_branch		|wire	|1	|input	|b类型分支条件是否满足(alu的运算结果)                   |
	|_b_branch_offset	|wire	|32	|input	|b类型分支指令的偏移量                                  |
	|_pc			|wire	|32	|input	|分支指令的地址(用于计算分支目标及要返回的地址)		|
	|b_branch_stall_	|reg	|1	|output	|b类型分支跳转成功需要产生一个气泡                      |
	|b_branch_targrt_	|reg	|32	|output	|b类型分支跳转目的地址                                  |
	|link_return_addr_	|reg	|32	|output	|链接跳转指令的返回地址(pc+8)				|	

### EX_MEM(ignore) 

- 模块描述：流水线访存阶段 
- 子模块：
- 父模块：[CPU](#cpu)
- 接口定义：  
	|名称          |类型|位宽 |输入/输出|描述                    |
	|:---:         |:---:|:---:|:---:    |:---                    |
	|_alu_res		|wire	|32	|input	|alu的运算结果		       |
	|_sel_reg_wdata		|wire	|3	|input	|regfile写数据选择信号	       |
	|_link_return_addr	|wire	|32	|input	|链接跳转指令的返回地址        |
	|_reg_waddr		|wire	|5	|input	|写regfile寄存器地址           |
	|_rf_we			|wire	|1	|input	|regfile寄存器写使能           |
	|_pc			|wire	|32	|input	|指令的地址                    |
	|_div_res		|wire	|64	|input	|除法运算结果                  |
	|_mult_res		|wire	|64	|input	|乘法运算结果                  |
	|_hilo_we		|wire	|3	|input	|hilo寄存器写使能              |
	|_mem_extend		|wire	|5	|input	|从DM中取出的数据的加工方法	|
	|_dm_wdata		|wire	|32	|input	|要写入DM中的数据		|
	|_sel_dm_wdata		|wire	|2	|input	|DM写入位选择信号			|
	|_stall			|wire	|1	|input	|流水线访存阶段是否暂停					|
	|_flash			|wire	|1	|input	|访存阶段冒泡信号						|
	|dm_wdata_		|reg	|32	|output	|	|
	|sel_dm_wdata_		|reg	|2	|output	|	|
	|mem_extend_		|reg	|5	|output	||
	|sel_reg_wdata_		|reg	|3	|output	||
	|alu_res_		|reg	|32	|output	||
	|link_return_addr_	|reg	|32	|output	||
	|reg_waddr_		|reg	|5	|output ||
	|rf_we_			|reg	|1	|output ||
	|pc_			|reg	|32	|output ||
	|div_res_		|reg	|64	|output ||
	|mult_res_		|reg	|64	|output ||
	|hilo_we_		|reg	|3	|output ||

### EX_EXCEPTION

- 模块描述：将执行阶段的数据传递给异常处理级
- 子模块：
- 父模块：[CPU](#cpu)
- 接口定义：  
	|名称          |类型|位宽 |输入/输出|描述                    |
	|:---:         |:---:|:---:|:---:    |:---                    |

### EXCEPTION

- 模块描述：流水线异常处理级
- 子模块：[CATCH](#catch),[HANDLE](#handle)
- 父模块：[CPU](#cpu)
- 接口定义：  
	|名称          |类型|位宽 |输入/输出|描述                    |
	|:---:         |:---:|:---:|:---:    |:---                    |

#### CATCH

- 模块描述：异常捕获
- 子模块：
- 父模块：[EXCEPTION](#exception)
- 接口定义：  
	|名称          |类型|位宽 |输入/输出|描述                    |
	|:---:         |:---:|:---:|:---:    |:---                    |

#### HANDLE

- 模块描述：异常处理
- 子模块：
- 父模块：[EXCEPTION](#exception)
- 接口定义：  
	|名称          |类型|位宽 |输入/输出|描述                    |
	|:---:         |:---:|:---:|:---:    |:---                    |

### EXCEPTION_MEM

- 模块描述：将异常处理阶段的数据传递给访存阶段
- 子模块：
- 父模块：[CPU](#cpu)
- 接口定义：  
	|名称          |类型|位宽 |输入/输出|描述                    |
	|:---:         |:---:|:---:|:---:    |:---                    |

### MEM

- 模块描述：访存阶段 
- 子模块：[DM](#dm)，[MEM_EXT](#mem_ext)
- 父模块：[CPU](#cpu)
- 接口定义：  
	|名称          |类型|位宽 |输入/输出|描述                    |
	|:---:         |:---:|:---:|:---:    |:---                    |
	|_alu_res		|wire	|32	|input	|alu的运算结果                            |
	|_link_return_addr	|wire	|32	|input	|链接跳转指令的返回地址|
	|_reg_waddr		|wire	|5	|input	|regfile寄存器写地址|
	|_rf_we			|wire	|1	|input	|regfile寄存器写使能|
	|_pc			|wire	|32	|input	|指令的地址|
	|_div_res		|wire	|64	|input	|除法运算的结果|
	|_mult_res		|wire	|64	|input	|乘法运算的结果|
	|_hilo_we		|wire	|3	|input	|hilo寄存器写使能|
	|_sel_reg_wdata		|wire	|3	|input	|regfile写数据选择信号|
	|_mem_extend		|wire	|5	|input	|从DM中取出的数据的加工方法	|
	|_dm_wdata		|wire	|32	|input	|要写入DM中的数据		|
	|_sel_dm_wdata		|wire	|2	|input	|DM写入位选择信号			|
	|alu_res_		|reg	|32	|output	|alu的运算结果 |
	|link_return_addr_	|reg	|32	|output	|链接跳转指令的返回地址|
	|reg_waddr_		|reg	|5	|output	|regfile寄存器写地址|
	|rf_we_			|reg	|1	|output	|regfile寄存器写使能|
	|pc_			|reg	|32	|output	|指令的地址|
	|div_res_		|reg	|64	|output	|除法运算的结果|
	|mult_res_		|reg	|64	|output	|乘法运算的结果|
	|hilo_we_		|reg	|3	|output	|hilo寄存器写使能|
	|sel_reg_wdata_		|reg	|3	|output	|regfile写数据选择信号|

#### DM

- 模块描述：数据存储器 
- 子模块：
- 父模块：[MEM](#mem)
- 接口定义：  
	|名称          |类型|位宽 |输入/输出|描述                    |
	|:---:         |:---:|:---:|:---:    |:---                    |
	|_raddr		|wire	|32	|input	|读取字的地址		|
	|_dm_wdata		|wire	|32	|input	|要写入DM中的数据		|
	|_dm_waddr		|wire	|32	|input	|要写入的DM地址(alu_sel)	|
	|_rdata		|reg	|32	|output	|读取的字		|
	|_sel_dm_wdata		|wire	|2	|input	|DM写入位选择信号			|

#### MEM_EXT

- 模块描述：处理DM取出的字
- 子模块：
- 父模块：[MEM](#mem)
- 接口定义：  
	|名称          |类型|位宽 |输入/输出|描述                    |
	|:---:         |:---:|:---:|:---:    |:---                    |
	|_mem_extend	|wire	|5	|input	|从DM中取出的数据的加工方法		|
	|_dm_rdata	|wire	|32	|input	|从DM中取出的数据			|
	|_dm_reg_wdata	|reg	|32	|output	|从DM中取出的要写regfile的数据			|

### MEM_WB 

- 模块描述：流水线写回阶段 
- 子模块：
- 父模块：[CPU](#cpu)
- 接口定义：  
	|名称          |类型|位宽 |输入/输出|描述                    |
	|:---:         |:---:|:---:|:---:    |:---                    |
	|_stall			|wire	|1	|input	|回写阶段暂停信号|
	|_flash			|wire	|1	|input	|回写阶段冒泡信号			|
	|_alu_res		|wire	|32	|input	|alu的运算结果                            |
	|_link_return_addr	|wire	|32	|input	|链接跳转指令的返回地址|
	|_reg_waddr		|wire	|5	|input	|regfile寄存器写地址|
	|_rf_we			|wire	|1	|input	|regfile寄存器写使能|
	|_pc			|wire	|32	|input	|指令的地址|
	|_div_res		|wire	|64	|input	|除法运算的结果|
	|_mult_res		|wire	|64	|input	|乘法运算的结果|
	|_hilo_we		|wire	|3	|input	|hilo寄存器写使能|
	|_sel_reg_wdata		|wire	|3	|input	|regfile写数据选择信号|
	|_dm_reg_wdata		|wire	|32	|input	|从DM中取出的要写regfile的数据			|
	|dm_reg_wdata_		|reg	|32	|output	||
	|_alu_res		|reg	|32	|output	||
	|_link_return_addr	|reg	|32	|output	||
	|_reg_waddr		|reg	|5	|output	||
	|_rf_we			|reg	|1	|output	||
	|_pc			|reg	|32	|output	||
	|_div_res		|reg	|64	|output	||
	|_mult_res		|reg	|64	|output	||
	|_hilo_we		|reg	|3	|output	||
	|_sel_reg_wdata		|reg	|3	|output	||

### WB

- 模块描述：回写阶段 
- 子模块：[HILO](#hilo),[HILO_CU](#hilo),[CP0](#CP0),[RF](#rf)
- 父模块：[CPU](#cpu)
- 接口定义：  
	|名称          |类型|位宽 |输入/输出|描述                    |
	|:---:         |:---:|:---:|:---:    |:---                    |
	|_stall			|wire	|1	|input	|回写阶段暂停信号|
	|_alu_res		|wire	|32	|input	|alu的运算结果                            |
	|_link_return_addr	|wire	|32	|input	|链接跳转指令的返回地址|
	|_reg_waddr		|wire	|5	|input	|regfile寄存器写地址|
	|_rf_we			|wire	|1	|input	|regfile寄存器写使能|
	|_pc			|wire	|32	|input	|指令的地址|
	|_div_res		|wire	|64	|input	|除法运算的结果|
	|_mult_res		|wire	|64	|input	|乘法运算的结果|
	|_hilo_we		|wire	|3	|input	|hilo寄存器写使能|
	|_dm_reg_wdata		|wire	|32	|input	|从DM中取出的要写regfile的数据			|
	|_sel_reg_wdata		|wire	|3	|input	|regfile写数据选择信号|
	|reg_wdata_		|reg	|32	|output	|写回regfile的数据			|
	|reg_waddr_		|reg	|5	|output	|regfile的写地址                        |
	|rf_we_			|reg	|1	|output	|regfile的写使能                        |

#### HILO

- 模块描述：hilo寄存器 
- 子模块：
- 父模块：[WB](#wb)
- 接口定义：  
	|名称          |类型|位宽 |输入/输出|描述                    |
	|:---:         |:---:|:---:|:---:    |:---                    |
	|_hi		|wire	|32	|input	|要写入hi寄存器的值				|
	|_lo		|wire	|32	|input	|要写入lo寄存器的值                             |
	|hi_		|reg	|32	|output	|hi寄存器的值                                   |
	|lo_		|reg	|32	|output	|lo寄存器的值                                   |
- 内部寄存器说明：  
	|名称          |个数|位宽 |描述                    |
	|:---:         |:---:|:---:|:---                    |
	|hi		|1	|32	|保存除法余数，乘法高32位				|
	|lo		|1	|32	|保存除法商，乘法低32位					|

#### HILO_CU

- 模块描述：hilo寄存器 
- 子模块：
- 父模块：[WB](#wb)
- 接口定义：  
	|名称          |类型|位宽 |输入/输出|描述                    |
	|:---:         |:---:|:---:|:---:    |:---                    |
	|_mult		|wire	|64	|input	|乘法运算结果			|
	|_div		|wire	|64	|input	|除法运算结果			|
	|_alu_res	|wire	|32	|input	|alu的运算结果	           |
	|_hi		|wire	|32	|input	|hi寄存器的值              |
	|_lo		|wire	|32	|input	|lo寄存器的值              |
	|_hilo_we	|wire	|3	|input	|hilo寄存器写使能          |
	|hi_		|reg	|32	|output	|要写入hi寄存器的值        |
	|lo_		|reg	|32	|output	|要写入lo寄存器的值        |

#### CP0

- 模块描述：协处理器0
- 子模块：
- 父模块：[WB](#wb)
- 接口定义： 
	|名称          |类型|位宽 |输入/输出|描述                    |
	|:---:         |:---:|:---:|:---:    |:---                    |

#### RF

- 模块描述：寄存器堆
- 子模块：
- 父模块：[WB](#wb)
- 接口定义：  
	|名称          |类型|位宽 |输入/输出|描述                    |
	|:---:         |:---:|:---:|:---:    |:---                    |
	|_stall		|wire	|1	|input	|regfife写暂停信号			|
	|_rf_we		|wire	|1	|input	|regfile寄存器写使能		|
	|_reg_waddr	|wire	|5	|input	|regfile寄存器写地址		|
	|_reg_wdata	|wire	|32	|input	|regfile寄存器写数据		|
	|_data1_addr	|wire	|5	|input	|regfile寄存器读地址1		|
	|_data2_addr	|wire	|5	|input	|regfile寄存器读地址2		|
	|data1_		|reg	|32	|output	|regfile寄存器读数据1		|
	|data2_		|reg	|32	|output	|regfile寄存器读数据2		|
- 内部寄存器说明：  
	|名称          |个数|位宽 |描述                    |
	|:---:         |:---:|:---:|:---                    |
	|regfile	|32	|32	|32个32位寄存器			|

### STALL

- 模块描述：流水线暂停控制单元
- 子模块：
- 父模块：[CPU](#cpu)
- 接口定义：  
	|名称          |类型|位宽 |输入/输出|描述                    |
	|:---:         |:---:|:---:|:---:    |:---                    |
	|_div_mult_stall		|wire	|1	|input	|div,mult引起的暂停		|
	|stall_			|reg	|6	|output	|各个阶段暂停控制信号			|

### FLASH

- 模块描述：流水线冒泡控制单元
- 子模块：
- 父模块：[CPU](#cpu)
- 接口定义： 
	|名称          |类型|位宽 |输入/输出|描述                    |
	|:---:         |:---:|:---:|:---:    |:---                    |
	|_b_flash		|wire	|1	|input	|由b类型分支跳转成功引起的冒泡		|
	|flash_			|reg	|4	|output	|各个阶段冒泡控制信号				|

### DC

- 模块描述：数据相关处理单元(Correlation)
- 子模块：
- 父模块：[CPU](#cpu)
- 接口定义： 
	|名称          |类型|位宽 |输入/输出|描述                    |
	|:---:         |:---:|:---:|:---:    |:---                    |
