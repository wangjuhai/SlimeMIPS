# 数据相关解决方法

<img src="../../../Pictures/52B37EC639F979AA49AF6123C6F0A06D.jpg" style="transform:rotate(-90deg);">

# 中断改动说明

## 精确异常

## 增设cp0

- 新寄存器：
	- BadVAddr:记录最新地址相关例外出错地址
	- Count:处理器内部计数器
	- Status:处理器状态与控制寄存器
	- Cause:存放上一次例外的原因
	- EPC:存放上一次发生例外的指令PC

## 译码阶段增设延迟槽判断信号，该信号一直传递到异常处理级别和cp0

## cpu增加外部中断信号输入，以及计时器中断信号输出(来自cp0)

## 取指阶段增加异常信号(32位）
	- IF阶段判断是否是地址错位例外(取指)
	- ID阶段判断是否是保留地址例外，系统调用例外，断点例外
	- EX阶段判断是否是溢出或地址错位例外(数据访问)
	- EXCEPTION阶段判断最终发生的异常
	- cp0根据要处理的异常类型改动寄存器数据

## 增设异常处理级别

- 新增模块：
	- EX_EXCEPTION
	- EXCEPTION
		- CATCH
		- HANDLE
	- EXCEPTION_MEM
- 模块功能：异常捕获，异常处理
	- CATCH：接收异常信号并根据cpu当前状态及异常优先级判断最终发生的异常类型
	- HANDLE：根据发生异常的类型修改pc值,发送流水线暂停及冒泡信号，如果该指令写DM则取消写入,把最终处理的异常类型送给cp0
- 放在EX和MEM之间的原因
