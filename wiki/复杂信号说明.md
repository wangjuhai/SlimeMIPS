# 复杂信号说明

- 选择信号宏定义方式:模块名_待选信号1_待选信号2_待选信号3_…………

## 读数据选择信号:sel_rdata

- 信号描述:CPU.ID.CU产生信号用于选择CPU.ID.RDATA_MUX.data1_、CPU.ID.RDATA_MUX.data2_、CPU.ID.RDATA_MUX.taget_offset_
- 位宽:5
- 选择方式:5选3

|macro_definition|对应指令|
|:---:|:----:|
|CPU_ID_RDATA_MUX_NOP_NOP_NOP		||
|CPU_ID_RDATA_MUX_RS_DATA_RT_DATA_NOP	|ADD,ADDU,SUB,SUBU,SLT,SLTU,DIV,DIVU,MULT,MULTU,AND,NOR,OR,XOR,SLLV,SRAV,SRLV|
|CPU_ID_RDATA_MUX_RS_DATA_IMM32_NOP	|ADDI,ADDIU,SLTI,SLTIU,ANDI,ORI,XORI,LB,LBU,LH,LHU,LW,SB,SH,SW|
|CPU_ID_RDATA_MUX_CONSTANT_16_RT_DATA_NOP	|LUI|
|CPU_ID_RDATA_MUX_IMM32_RT_DATA_NOP	|SLL,SRA,SRL|
|CPU_ID_RDATA_MUX_RS_DATA_RT_DATA_IMM32	|BEQ,BNE|
|CPU_ID_RDATA_MUX_RS_DATA_CONSTANT_0_IMM32	|BGEZ,BGTZ,BLEZ,BLTZ,BGEZAL,BLTZAL|
|CPU_ID_RDATA_MUX_NOP_NOP_IMM32	|J,JAL|
|CPU_ID_RDATA_MUX_NOP_NOP_RS_DATA	|JR,JALR|
|CPU_ID_RDATA_MUX_RS_DATA_CONSTANT_0_NOP	|MTHI,MTLO|

## regfile写数据选择信号:sel_reg_wdata

- 信号描述:CPU.ID.CU产生信号用于选择CPU.WB.reg_wdata_
- 位宽:3
- 选择方式:4选一

|macro_definition|对应指令|
|:--:|:--:|
|CPU_WB_NOP		||
|CPU_WB_ALU_RES		|ADD,ADDI,ADDU,ADDIU,SUB,SUBU,SLT,SLTI,SLTU,ALTIU,AND,ANDI,LUI,NOR,OR,ORI,XOR,XORI,SLLV,SLL,SRAV,SRA,SRLV,SRL|
|CPU_WB_DELAYSLOT_ADDR	|BGEZAL,BLTAZL,JAL,JALR|
|CPU_WB_HI		|MFHI|
|CPU_WB_LO		|MFLO|
|CPU_WB_DM		|LB,LBU,LH,LHU,LW|

## regfile写地址选择信号:sel_reg_waddr

- 信号描述:CPU.ID.CU产生信号用于选择CPU.ID.REG_WDATA_MUX.reg_waddr_
- 位宽:2
- 选择方式:3选1

|macro_definition|对应指令|
|:---:|:----:|
|CPU_ID_REG_WDATA_MUX_NOP||
|CPU_ID_REG_WDATA_MUX_CONSTANT_31|BGEZAL,BLTZAL,JAL|
|CPU_ID_REG_WDATA_MUX_RD|ADD,ADDU,SUB,SUBU,SLT,SLTU,AND,NOR,OR,XOR,SLLV,SLL,SRAV,SRA,SRLV,SRL,JALR,MFHI,MFLO|
|CPU_ID_REG_WDATA_MUX_RT|ADDI,ADDIU,SLTI,SLTIU,ANDI,LUI,ORI,XORI,LB,LBU,LH,LHU,LW|

## ID模块位数拓展器控制信号:id_extend

- 位宽:3

|id_extend|操作描述|对应指令|
|:---:|:----:|:---:|
|EXT_NOP	|无效信号||
|EXT_0_15_SIGN|低16位有符号拓展|ADDI,ADDIU,SLTI,SLTIU|
|EXT_0_15_UNSIGN|低16位无符号拓展|ANDI,LUI,ORI,XORI|
|EXT_6_10_UNSIGN|6-10位无符号拓展|SLL,SRA,SRL|
|EXT_0_15_LEFT_SHIFT_2_SIGN|低16位左移两位符号拓展|BEQ,BNE,BGTZ,BLEZ,BLTZ,BGEZAL,BLTZAL|
|EXT_0_25_LEFT_SHIFT_2_PC|低26位左移两位拼接PC高四位|J,JAL|

## hilo寄存器写使能:hilo_we

- 信号描述:CPU.ID.CU产生信号用于选择CPU.WB.HILO_CU.hi_,CPU.WB.HILO_CU.lo_
- 位宽:3

|macro_definition|操作描述|指令|
|:---:|:---:|:---:|
|CPU_WB_HILO_CU_HI_LO|hi和lo寄存器的值不变||
|CPU_WB_HILO_CU_MULT|乘法结果写入|MULT,MULTU|
|CPU_WB_HILO_CU_DIV|除法结果写入|DIV,DIVU|
|CPU_WB_HILO_CU_ALU_RES_LO|alu运算结果写入hi，lo寄存器不变|MTHI|
|CPU_WB_HILO_CU_HI_ALU_RES|alu运算结果写入lo，hi寄存器不变|MTLO|

## MEM模块位数拓展信号:mem_extend

- 位宽:5

|macro_definition|操作描述|指令|
|:---:|:---:|:---:|
|CPU_MEM_MEM_EXT_UNSIGN_BYTE|取一无符号字节|LB|
|CPU_MEM_MEM_EXT_SIGN_BYTE|取一有符号字节|LBU|
|CPU_MEM_MEM_EXT_UNSIGN_HW|取一无符号半字|LH|
|CPU_MEM_MEM_EXT_SIGN_HW|取一有符号半字|LHU|
|CPU_MEM_MEM_EXT_W|取一字|LW|

## DM写数据选择信号:sel_dm_wdata

- 位宽:2

|macro_definition|指令|
|:---:|:---:|
|CPU_MEM_DM_NOP||
|CPU_MEM_DM_BYTE|SB|
|CPU_MEM_DM_HW|SH|
|CPU_MEM_DM_W|SW|

## alu运算类型:alu_op

- 位宽:8

|macro_definition|指令|
|:-:|:-:|
|ALU_NOP||
|ALU_ADD|ADD,ADDI,MTHI,MTLO,LB,LBU,LH,LHU,LW,SB,SH,SW|
|ALU_SUB|SUB,SUBI|
|ALU_LESS_THAN_SIGN|SLT,SLTI		|
|ALU_LESS_THAN_UNSIGN|SLTU,SLTIU       |
|ALU_AND|AND,ANDI           |
|ALU_LEFT_SHIFT|LUI,SLL,SLLV                    |
|ALU_NOR|NOR                     |
|ALU_OR|OR,ORI               |
|ALU_XOR|XOR,XORI           |
|ALU_RIGHT_SHIFT_ARITHMETIC|SRAV,SRA           |
|ALU_RIGHT_SHIFT_LOGIC|SRLV,SRL           |
|ALU_EQUAL|BEQ                     |
|ALU_INEQUAL|BNE                     |
|ALU_GREAT_EQUAL_ZERO|BGEZ,BGEZAL     |
|ALU_GREAT_ZERO|BGTZ                   |
|ALU_LESS_ZERO|BLEZ                   |
|ALU_LESS_ZREO|BLTZ,BLTZAL     |
